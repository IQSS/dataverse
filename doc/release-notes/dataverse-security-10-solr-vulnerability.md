# Security vulnerability in Solr 

A serious security issue has recently been identified in multiple
versions of Solr search engine, including v.7.3 that Dataverse is
currently using. Follow the instructions below to verify that your
installation is safe from a potential attack. You can also consult the
following link for a detailed description of the issue:
<A HREF="https://github.com/veracode-research/solr-injection#7-cve-2019-xxxx-rce-via-velocity-template-by-_s00py">RCE in Solr via Velocity Template</A>.

The vulnerability allows an intruder to execute arbitrary code on
the system running Solr. Fortunately, it can only be exploited if Solr
API access point is open to direct access from public networks (aka,
"the outside world"), which is NOT needed in a Dataverse installation.

We have always recommended having Solr (port 8983) firewalled off from
public access in our installation guides. But we recommend that you
double-check your firewall settings and verify that the port is not
accessible from outside networks. The simplest quick test is to try
the following URL in your browser:

      `http://<your Solr server address>:8983`

and confirm that you get "access denied" or that it times out, etc. 

In most cases, when Solr runs on the same server as the Dataverse web
application, you will only want the port accessible from localhost. We
also recommend that you add the following arguments to the Solr
startup command: `-j jetty.host=127.0.0.1`. This will make Solr accept
connections from localhost only; adding redundancy, in case of the
firewall failure.

In a case where Solr needs to run on a different host, make sure that
the firewall limits access to the port only to the Dataverse web
host(s), by specific ip address(es).
 
We would also like to reiterate that it is simply never a good idea to
run Solr as root! Running the process as a non-privileged user would
substantially minimize any potential damage even in the event that the
instance is compromised.
